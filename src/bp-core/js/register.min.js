jQuery(document).ready(function(){var e=jQuery("body #profile-details-section #signup_profile_field_ids"),i=jQuery('<input type="hidden" class="onloadfields" value=\'\' />'),t=jQuery('<input type="hidden" name="signup_profile_field_ids" id="signup_profile_field_ids" value=\'\' />');jQuery("body").append(i);var d=0,a=jQuery("body .onloadfields"),l=0;a.val(e.val()),"undefined"!=typeof tinymce&&tinymce.remove("textarea");var r=jQuery("body #buddypress #register-page #signup-form .layout-wrap #profile-details-section .editfield fieldset select#"+BP_Register.field_id);if(r.val().length){1===l&&(jQuery("body .ajax_added").remove(),e.val(jQuery(".onloadfields").val()));var n=e.val(),s=r.val(),o=jQuery(".register-section.extended-profile"),u=a.val(),f={action:"xprofile_get_field",_wpnonce:BP_Register.nonce,fields:n,fixedIds:u,tinymce:d,type:s};jQuery.ajax({type:"GET",url:BP_Register.ajaxurl,data:f,success:function(i){if(i.success){l=1,!0===parseInt(i.data.field_html)&&(d=1),e.val(""),e.val(i.data.field_ids),o.append(i.data.field_html);var a=jQuery("body #profile-details-section > .editfield");a.sort(function(e,i){return jQuery(e).data("index")-jQuery(i).data("index")}),jQuery("#profile-details-section").html(a),jQuery("body #profile-details-section").append(t),t.val(i.data.field_ids),"undefined"!=typeof tinymce&&(tinymce.remove("textarea"),tinymce.init({selector:"textarea",branding:!1,menubar:!1,statusbar:!1,plugins:"lists fullscreen link",toolbar:" bold italic underline blockquote strikethrough bullist numlist alignleft aligncenter alignright undo redo link fullscreen"}),tinyMCE.execCommand("mceRepaint"))}}})}jQuery(document).on("change","body #buddypress #register-page #signup-form .layout-wrap #profile-details-section .editfield fieldset select#"+BP_Register.field_id,function(){var i=jQuery("body #buddypress #register-page #signup-form .submit #signup_submit");i.prop("disabled",!0),1===l&&(jQuery("body .ajax_added").remove(),e.val(jQuery(".onloadfields").val()));var r=e.val(),n=this.value,s=jQuery(".register-section.extended-profile"),o=a.val(),u={action:"xprofile_get_field",_wpnonce:BP_Register.nonce,fields:r,fixedIds:o,tinymce:d,type:n};jQuery.ajax({type:"GET",url:BP_Register.ajaxurl,data:u,success:function(a){if(a.success){i.prop("disabled",!1),l=1,!0===parseInt(a.data.field_html)&&(d=1),e.val(""),e.val(a.data.field_ids),s.append(a.data.field_html);var r=jQuery("body #profile-details-section > .editfield");r.sort(function(e,i){return jQuery(e).data("index")-jQuery(i).data("index")}),jQuery("#profile-details-section").html(r),jQuery("body #profile-details-section").append(t),t.val(a.data.field_ids),"undefined"!=typeof tinymce&&(tinymce.remove("textarea"),tinymce.init({selector:"textarea",branding:!1,menubar:!1,statusbar:!1,plugins:"lists fullscreen link",toolbar:" bold italic underline blockquote strikethrough bullist numlist alignleft aligncenter alignright undo redo link fullscreen"}),tinyMCE.execCommand("mceRepaint"))}else i.prop("disabled",!1)}})})});